(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a(72)},39:function(e,t,a){},61:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(30),l=a.n(o),c=(a(39),a(8)),i=a(9),s=a(12),u=a(10),m=a(13),d=a(7),h=a(15),f=a.n(h),p=a(6),v=a.n(p);v.a.defaults.headers={Authorization:localStorage.getItem("TOKEN"),"Content-Type":"multipart/form-data"};var g="url_de_heroku",E=function(e){return v.a.post("".concat(g,"/todos"),e).then(function(e){return e.data.todo}).catch(function(e){return e})},k=function(e){return v.a.delete("".concat(g,"/todos/").concat(e)).then(function(e){return e.data.todo}).catch(function(e){return e})},b=function(e){return v.a.patch("".concat(g,"/todos/").concat(e._id),e).then(function(e){return e.data.todo}).catch(function(e){return e})},N=function(e){var t=e.handleChange,a=e.handleSubmit,n=e.body,o=e.priority,l=e.error,c=e._id;return r.a.createElement("div",null,r.a.createElement("h3",null,"Agrega un ToDo"),r.a.createElement("form",{className:"uk-text-left",onSubmit:a},r.a.createElement("fieldset",{className:"uk-fieldset"},r.a.createElement("div",{className:"uk-margin"},r.a.createElement("label",null,"Tarea:"),r.a.createElement("input",{onChange:t,className:"uk-input ".concat(l?"uk-form-danger":""),type:"text",name:"body",value:n,placeholder:"todo"})),r.a.createElement("div",{className:"uk-margin"},r.a.createElement("label",null,"Prioridad:"),r.a.createElement("select",{name:"priority",onChange:t,className:"uk-select",value:o},r.a.createElement("option",{value:"",disabled:!0},"Selecciona la prioridad"),r.a.createElement("option",{value:"low"},"Baja"),r.a.createElement("option",{value:"medium"},"Media"),r.a.createElement("option",{value:"high"},"Alta"))),r.a.createElement("div",{className:"uk-margin"},r.a.createElement("div",{"uk-form-custom":"true"},r.a.createElement("input",{type:"file",name:"images",onChange:t,multiple:!0}),r.a.createElement("button",{className:"uk-button uk-button-default",type:"button",tabindex:"-1"},"Select")))),r.a.createElement("button",{className:"uk-button uk-button-primary"},c?"Editar":"Agregar"," Todo")),l&&r.a.createElement("div",{className:"uk-alert-danger uk-margin-small-top","uk-alert":"true"},r.a.createElement("p",null,l)))},y=a(19),S=a.n(y),w=function(e){return"low"===e?"success":"medium"===e?"warning":"danger"},O=function(e){var t=e.body,a=e.priority,n=e.deleteItem,o=e.images,l=e.expiration_date,c=e.setTodo;return r.a.createElement("div",{className:"uk-margin-small-bottom uk-card uk-card-default uk-padding-small"},r.a.createElement("div",{className:"uk-card-body uk-flex uk-flex-middle uk-flex-around"},r.a.createElement("span",null,t),r.a.createElement("span",{className:"uk-label uk-label-".concat(w(a))},a),r.a.createElement("div",{className:"uk-inline"},r.a.createElement("button",{className:"uk-button",type:"button"},r.a.createElement("span",{"uk-icon":"icon: chevron-down"})),r.a.createElement("div",{"uk-dropdown":"true"},r.a.createElement("ul",{className:"uk-nav uk-dropdown-nav"},r.a.createElement("li",{onClick:c},r.a.createElement("a",{href:"#"},"Editar ",r.a.createElement("span",{"uk-icon":"icon: pencil"}))),r.a.createElement("li",{className:"uk-nav-divider"}),r.a.createElement("li",{onClick:n},r.a.createElement("a",{href:"#"},"Eliminar ",r.a.createElement("span",{"uk-icon":"icon: trash"}))))))),r.a.createElement("div",{className:"uk-card-footer"},o&&r.a.createElement("p",null,o.length," archivos"),r.a.createElement("a",{href:"#",className:"uk-button uk-button-text"},"Vence ",S()(l).fromNow())))},j=function(e){var t=e.todos,a=e.deleteItem,n=e.setTodo;return r.a.createElement("div",null,r.a.createElement("h3",null,"Lista de ToDos"),t.map(function(e,t){return r.a.createElement(O,Object.assign({setTodo:function(){return n(e)},deleteItem:function(){return a(e._id)},key:t},e))}))},C=(a(61),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={todo:{body:"",priority:"low"},todos:[]},a.setTodo=function(e){a.setState({todo:e})},a.handleChange=function(e){var t=a.state.todo,n=e.target.name;if(e.target.files)return t.image=e.target.files,a.setState({todo:t});t[n]=e.target.value,a.setState({todo:t})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.todo,r=t.todos;if(!n.body.length)return a.setState({error:"Debes agregar una tarea"});var o=r.findIndex(function(e){return e._id===n._id});n._id?a.onEditTodo(o):a.onCreateTodo()},a.onEditTodo=function(e){var t=a.state,n=t.todos,r=t.todo,o=new FormData;if(r.image){var l=!0,c=!1,i=void 0;try{for(var s,u=r.image[Symbol.iterator]();!(l=(s=u.next()).done);l=!0){var m=s.value;o.append("images",m)}}catch(h){c=!0,i=h}finally{try{l||null==u.return||u.return()}finally{if(c)throw i}}delete r.image}for(var d in r)o.append(d,r[d]);b(r).then(function(t){console.log(t),n.splice(e,1,t),t={body:"",priority:"low"},a.setState({todos:n,todo:t,error:void 0})}).catch(function(e){a.setState({error:e.message})})},a.onCreateTodo=function(){var e=a.state,t=e.todos,n=e.todo,r=new FormData;if(n.image){var o=!0,l=!1,c=void 0;try{for(var i,s=n.image[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var u=i.value;r.append("images",u)}}catch(d){l=!0,c=d}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}delete n.image}for(var m in n)r.append(m,n[m]);E(r).then(function(e){console.log(e),t.unshift(e),e={body:"",priority:"low"},a.setState({todos:t,todo:e,error:void 0})}).catch(function(e){a.setState({error:e.message})})},a.deleteItem=function(e){var t=a.state.todos;k(e).then(function(n){f.a.notification({message:'<span uk-icon="icon:check"></span> '.concat(n._id," eliminado con exito"),status:"success",pos:"top-right"}),t=t.filter(function(t){return t._id!==e}),a.setState({todos:t})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.props.user._id||this.props.history.push("/login")}},{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(g,"/todos")).then(function(e){return e.data.todos}).catch(function(e){return e}).then(function(t){t.reverse(),e.setState({todos:t})}).catch(function(e){f.a.notification({message:'<span uk-icon="icon:close"></span> '.concat(e.message),status:"danger",position:"top-left"})})}},{key:"render",value:function(){var e=this.state,t=e.todo,a=e.todos,n=e.error;return r.a.createElement("div",{className:""},r.a.createElement("h1",null,"ToDos"),r.a.createElement("div",{className:"uk-section"},r.a.createElement("div",{className:"uk-container"},r.a.createElement("div",{className:"uk-grid-match uk-child-width-1-2","uk-grid":"true"},r.a.createElement("div",null,r.a.createElement(N,Object.assign({},t,{error:n,handleSubmit:this.handleSubmit,handleChange:this.handleChange}))),r.a.createElement("div",null,r.a.createElement(j,{todos:a,setTodo:this.setTodo,deleteItem:this.deleteItem}))))))}}]),t}(n.Component)),T=function(e){var t=e.handleSubmit,a=e.handleChange,n=e.error,o=e.email,l=e.password;return r.a.createElement("div",{className:"uk-width-1-2"},r.a.createElement("form",{className:"uk-form-stacked",onSubmit:t},r.a.createElement("div",{className:"uk-margin"},r.a.createElement("label",{className:"uk-form-label",htmlFor:"email"},"Email:"),r.a.createElement("div",{className:"uk-inline"},r.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: user"}),r.a.createElement("input",{value:o,onChange:a,className:"uk-input",type:"email",name:"email"}))),r.a.createElement("div",{className:"uk-margin"},r.a.createElement("label",{className:"uk-form-label",htmlFor:"password"},"Password:"),r.a.createElement("div",{className:"uk-inline"},r.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: lock"}),r.a.createElement("input",{value:l,onChange:a,className:"uk-input",type:"password",name:"password"}))),n&&r.a.createElement("div",{className:"uk-alert-danger","uk-alert":"true"},r.a.createElement("p",null,n)),r.a.createElement("div",null,r.a.createElement("button",{className:"uk-button uk-button-primary"},"Login"))))},x=function(e){return v.a.post("".concat("https://ironhack-api.localtunnel.me","/auth/login"),e).then(function(e){return e.data}).catch(function(e){throw e.response.data})},I=function(e){return v.a.post("".concat("https://ironhack-api.localtunnel.me","/auth/register"),e).then(function(e){return e.data}).catch(function(e){throw e.response.data})},_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={auth:{email:"",password:""}},a.handleSubmit=function(e){e.preventDefault();var t=a.state.auth,n=a.props.location.pathname;if(console.log(t),!t.email.length)return a.setState({error:"Debes agregar una tarea"});"/login"===n?a.onLogin():a.onRegister()},a.onLogin=function(){var e=a.state.auth;x(e).then(function(e){var t=e.token,n=e.user;localStorage.setItem("TOKEN",t),localStorage.setItem("USER",JSON.stringify(n)),a.props.setUser(n),a.props.history.push("/")}).catch(function(e){return a.setState({error:e.message})})},a.onRegister=function(){var e=a.state.auth;I(e).then(function(e){var t=e.token,n=e.user;localStorage.setItem("TOKEN",t),localStorage.setItem("USER",JSON.stringify(n)),a.props.setUser(n),a.props.history.push("/")}).catch(function(e){return a.setState({error:e.message})})},a.handleChange=function(e){var t=a.state.auth;t[e.target.name]=e.target.value,a.setState({auth:t})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.state,t=e.error,a=e.auth;return r.a.createElement("div",null,r.a.createElement("div",{className:"uk-flex uk-flex-center"},r.a.createElement(T,Object.assign({},a,{error:t,handleSubmit:this.handleSubmit,handleChange:this.handleChange}))))}}]),t}(n.Component),U=function(e){var t=e.setUser,a=e.user;return r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(C,Object.assign({user:a},e))}}),r.a.createElement(d.a,{exact:!0,path:"/login",render:function(e){return r.a.createElement(_,Object.assign({},e,{setUser:t,user:a}))}}),r.a.createElement(d.a,{exact:!0,path:"/register",render:function(e){return r.a.createElement(_,Object.assign({},e,{setUser:t,user:a}))}}))},D=a(11),A=function(e){var t=e._id,a=(e.email,e.username,e.logout);return r.a.createElement("nav",{className:"uk-navbar-container","uk-navbar":"true"},r.a.createElement("div",{className:"uk-navbar-left"},r.a.createElement("a",{className:"uk-navbar-item uk-logo",href:"#"},"Logo")),r.a.createElement("div",{className:"uk-navbar-right"},t?r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",{onClick:a},r.a.createElement("a",{href:"#"},"Cerrar sesi\xf3n"))):r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",null,r.a.createElement(D.b,{to:"/login"},"Iniciar sesi\xf3n")),r.a.createElement("li",null,r.a.createElement(D.b,{to:"/register"},"Registro")))))},R=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{}},a.setUser=function(e){a.setState({user:e})},a.logout=function(){localStorage.removeItem("TOKEN"),localStorage.removeItem("USER");var e=a.state.user;e={},a.setState({user:e}),window.location.reload()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=JSON.parse(localStorage.getItem("USER"));e&&this.setState({user:e})}},{key:"render",value:function(){var e=this.state.user;return r.a.createElement("div",{className:"App"},r.a.createElement(A,Object.assign({},e,{logout:this.logout})),r.a.createElement("div",{className:"uk-section"},r.a.createElement(U,{setUser:this.setUser,user:e})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=a(33),L=a.n(J);a(70),a(71);f.a.use(L.a);l.a.render(r.a.createElement(function(){return r.a.createElement(D.a,null,r.a.createElement(R,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[34,1,2]]]);
//# sourceMappingURL=main.66d6978f.chunk.js.map